time="2025-07-01T10:13:08-03:00" level=warning msg="Found orphan containers ([python-web-mcp-scrapper-test-all-run-6a5ce3c11f32]) for this project. If you removed or renamed this service in your compose file, you can run this command with the --remove-orphans flag to clean it up."
Running UNIT tests...
============================= test session starts ==============================
platform linux -- Python 3.11.13, pytest-8.4.1, pluggy-1.6.0 -- /opt/venv/bin/python
cachedir: .pytest_cache
rootdir: /app
configfile: pytest.ini
plugins: asyncio-1.0.0, anyio-4.9.0, mock-3.14.1, pytest_httpserver-1.1.3, cov-6.2.1
asyncio: mode=Mode.STRICT, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 504 items

tests/unit/application/services/test_scraping_orchestrator.py::test_scraping_orchestrator_scrape_success PASSED [  0%]
tests/unit/application/services/test_scraping_orchestrator.py::test_scraping_orchestrator_initialization PASSED [  0%]
tests/unit/application/services/test_url_validator.py::test_url_validator_initialization PASSED [  0%]
tests/unit/application/services/test_url_validator.py::test_url_validator_validate_success[http://example.com] PASSED [  0%]
tests/unit/application/services/test_url_validator.py::test_url_validator_validate_success[https://example.com] PASSED [  0%]
tests/unit/application/services/test_url_validator.py::test_url_validator_validate_success[https://www.example.com/path?query=value] PASSED [  1%]
tests/unit/application/services/test_url_validator.py::test_url_validator_validate_success[https://127.0.0.1:8080] PASSED [  1%]
tests/unit/application/services/test_url_validator.py::test_url_validator_validate_success[http://localhost] PASSED [  1%]
tests/unit/application/services/test_url_validator.py::test_url_validator_validate_failure[file:///etc/passwd] PASSED [  1%]
tests/unit/application/services/test_url_validator.py::test_url_validator_validate_failure[javascript:alert('xss')] PASSED [  1%]
tests/unit/application/services/test_url_validator.py::test_url_validator_validate_failure[ftp://example.com] PASSED [  2%]
tests/unit/application/services/test_url_validator.py::test_url_validator_validate_failure[not-a-url] PASSED [  2%]
tests/unit/application/test_chunked_processing.py::TestChunkedHTMLProcessor::test_processor_initialization PASSED [  2%]
tests/unit/application/test_chunked_processing.py::TestChunkedHTMLProcessor::test_processor_custom_configuration PASSED [  2%]
tests/unit/application/test_chunked_processing.py::TestChunkedHTMLProcessor::test_should_use_chunked_processing_small_content PASSED [  2%]
tests/unit/application/test_chunked_processing.py::TestChunkedHTMLProcessor::test_should_use_chunked_processing_large_content PASSED [  3%]
tests/unit/application/test_chunked_processing.py::TestChunkedHTMLProcessor::test_should_use_chunked_processing_disabled PASSED [  3%]
tests/unit/application/test_chunked_processing.py::TestChunkedHTMLProcessor::test_extract_content_small_html_backward_compatibility PASSED [  3%]
tests/unit/application/test_chunked_processing.py::TestChunkedHTMLProcessor::test_extract_content_large_html_chunked_processing PASSED [  3%]
tests/unit/application/test_chunked_processing.py::TestChunkedHTMLProcessor::test_memory_efficiency_large_content PASSED [  3%]
tests/unit/application/test_chunked_processing.py::TestChunkedHTMLProcessor::test_error_handling_malformed_html PASSED [  4%]
tests/unit/application/test_chunked_processing.py::TestChunkedHTMLProcessor::test_fallback_on_chunked_processing_failure 
-------------------------------- live log call ---------------------------------
2025-07-01 13:13:10 [ WARNING] Chunked processing failed, falling back to original method: Chunked processing failed (logger.py:47)
PASSED                                                                   [  4%]
tests/unit/application/test_chunked_processing.py::TestChunkedHTMLProcessor::test_content_area_detection PASSED [  4%]
tests/unit/application/test_chunked_processing.py::TestChunkedHTMLProcessor::test_performance_monitoring PASSED [  4%]
tests/unit/application/test_chunked_processing.py::TestChunkedHTMLProcessor::test_backward_compatibility_with_original_function PASSED [  4%]
tests/unit/application/test_chunked_processing.py::TestChunkedHTMLProcessor::test_integration_with_existing_scraper PASSED [  5%]
tests/unit/application/test_chunked_processing.py::TestChunkedHTMLProcessor::test_output_consistency PASSED [  5%]
tests/unit/application/test_chunked_processing_edge_cases.py::TestChunkedProcessingEdgeCases::test_empty_html PASSED [  5%]
tests/unit/application/test_chunked_processing_edge_cases.py::TestChunkedProcessingEdgeCases::test_html_without_body PASSED [  5%]
tests/unit/application/test_chunked_processing_edge_cases.py::TestChunkedProcessingEdgeCases::test_html_with_multiple_main_elements PASSED [  5%]
tests/unit/application/test_chunked_processing_edge_cases.py::TestChunkedProcessingEdgeCases::test_extremely_nested_html PASSED [  6%]
tests/unit/application/test_content_processing_service.py::TestContentProcessingService::test_process_html_success PASSED [  6%]
tests/unit/application/test_content_processing_service.py::TestContentProcessingService::test_process_html_error_handling PASSED [  6%]
tests/unit/application/test_content_processing_service.py::TestContentProcessingService::test_process_html_fallback_mechanism 
-------------------------------- live log call ---------------------------------
2025-07-01 13:13:11 [ WARNING] Chunked processing failed for https://example.com, falling back to original method: Chunked processing failed (logger.py:47)
PASSED                                                                   [  6%]
tests/unit/application/test_content_processing_service.py::TestContentProcessingService::test_validate_content_length_sufficient PASSED [  6%]
tests/unit/application/test_content_processing_service.py::TestContentProcessingService::test_validate_content_length_insufficient 
-------------------------------- live log call ---------------------------------
2025-07-01 13:13:11 [ WARNING] No significant text content extracted (length < 20) at https://example.com (logger.py:47)
PASSED                                                                   [  7%]
tests/unit/application/test_content_processing_service.py::TestContentProcessingService::test_validate_content_length_empty_content 
-------------------------------- live log call ---------------------------------
2025-07-01 13:13:11 [ WARNING] No significant text content extracted (length < 10) at https://example.com (logger.py:47)
PASSED                                                                   [  7%]
tests/unit/application/test_content_processing_service.py::TestContentProcessingService::test_format_content_markdown PASSED [  7%]
tests/unit/application/test_content_processing_service.py::TestContentProcessingService::test_format_content_text PASSED [  7%]
tests/unit/application/test_content_processing_service.py::TestContentProcessingService::test_format_content_html PASSED [  7%]
tests/unit/application/test_content_processing_service.py::TestContentProcessingService::test_format_content_html_fallback_when_no_body PASSED [  8%]
tests/unit/application/test_content_processing_service.py::TestContentProcessingService::test_format_content_with_max_length PASSED [  8%]
tests/unit/application/test_content_processing_service.py::TestContentProcessingService::test_format_content_without_max_length PASSED [  8%]
tests/unit/application/test_content_processing_service.py::TestContentProcessingService::test_get_min_content_length_search_app_domain PASSED [  8%]
tests/unit/application/test_content_processing_service.py::TestContentProcessingService::test_get_min_content_length_regular_domain PASSED [  8%]
tests/unit/application/test_content_processing_service.py::TestContentProcessingService::test_get_min_content_length_no_domain PASSED [  9%]
tests/unit/application/test_mcp_server.py::TestMCPRequestHandler::test_handle_tool_request_success 
-------------------------------- live log call ---------------------------------
2025-07-01 13:13:11 [    INFO] Handling tool request: scrape_web with arguments: {'url': 'https://example.com', 'output_format': 'markdown'} (logger.py:43)
2025-07-01 13:13:11 [    INFO] Scraping URL: https://example.com/ (logger.py:43)
2025-07-01 13:13:11 [    INFO] Formatting tool response: 12 characters (logger.py:43)
PASSED                                                                   [  9%]
tests/unit/application/test_mcp_server.py::TestMCPRequestHandler::test_handle_tool_request_validation_error 
-------------------------------- live log call ---------------------------------
2025-07-01 13:13:11 [    INFO] Handling tool request: invalid_tool with arguments: {} (logger.py:43)
PASSED                                                                   [  9%]
tests/unit/application/test_mcp_server.py::TestMCPRequestHandler::test_handle_prompt_request_success 
-------------------------------- live log call ---------------------------------
2025-07-01 13:13:11 [    INFO] Handling prompt request: scrape with arguments: {'url': 'https://example.com'} (logger.py:43)
2025-07-01 13:13:11 [    INFO] Formatting prompt response: 12 characters (logger.py:43)
PASSED                                                                   [  9%]
tests/unit/application/test_mcp_server.py::TestMCPResponseFormatter::test_format_tool_response_success 
-------------------------------- live log call ---------------------------------
2025-07-01 13:13:11 [    INFO] Formatting tool response: 12 characters (logger.py:43)
PASSED                                                                   [  9%]
tests/unit/application/test_mcp_server.py::TestMCPResponseFormatter::test_format_prompt_response_success 
-------------------------------- live log call ---------------------------------
2025-07-01 13:13:11 [    INFO] Formatting prompt response: 12 characters (logger.py:43)
PASSED                                                                   [ 10%]
tests/unit/application/test_mcp_server.py::TestMCPParameterValidator::test_validate_tool_parameters_success PASSED [ 10%]
tests/unit/application/test_mcp_server.py::TestMCPParameterValidator::test_validate_tool_parameters_invalid_tool PASSED [ 10%]
tests/unit/application/test_mcp_server.py::TestMCPParameterValidator::test_validate_prompt_parameters_success PASSED [ 10%]
tests/unit/application/test_scraping_configuration_service.py::TestScrapingConfigurationService::test_get_browser_config_with_defaults PASSED [ 10%]
tests/unit/application/test_scraping_configuration_service.py::TestScrapingConfigurationService::test_get_browser_config_with_custom_user_agent PASSED [ 11%]
tests/unit/application/test_scraping_configuration_service.py::TestScrapingConfigurationService::test_get_browser_config_randomization PASSED [ 11%]
tests/unit/application/test_scraping_configuration_service.py::TestScrapingConfigurationService::test_get_elements_to_remove_default_only PASSED [ 11%]
tests/unit/application/test_scraping_configuration_service.py::TestScrapingConfigurationService::test_get_elements_to_remove_with_custom_elements PASSED [ 11%]
tests/unit/application/test_scraping_configuration_service.py::TestScrapingConfigurationService::test_get_elements_to_remove_empty_custom_elements PASSED [ 11%]
tests/unit/application/test_scraping_configuration_service.py::TestScrapingConfigurationService::test_get_elements_to_remove_does_not_mutate_default PASSED [ 12%]
tests/unit/application/test_scraping_configuration_service.py::TestScrapingConfigurationService::test_get_timeout_with_custom_value PASSED [ 12%]
tests/unit/application/test_scraping_configuration_service.py::TestScrapingConfigurationService::test_get_timeout_with_none_uses_default PASSED [ 12%]
tests/unit/application/test_scraping_configuration_service.py::TestScrapingConfigurationService::test_get_scraping_config PASSED [ 12%]
tests/unit/application/test_scraping_configuration_service.py::TestScrapingConfigurationService::test_get_grace_period_default PASSED [ 12%]
tests/unit/application/test_scraping_configuration_service.py::TestScrapingConfigurationService::test_get_grace_period_custom PASSED [ 13%]
tests/unit/application/test_scraping_configuration_service.py::TestScrapingConfigurationService::test_validate_url_valid_http PASSED [ 13%]
tests/unit/application/test_scraping_configuration_service.py::TestScrapingConfigurationService::test_validate_url_valid_https PASSED [ 13%]
tests/unit/application/test_scraping_configuration_service.py::TestScrapingConfigurationService::test_validate_url_invalid_format PASSED [ 13%]
tests/unit/application/test_scraping_configuration_service.py::TestScrapingConfigurationService::test_validate_url_empty_string PASSED [ 13%]
tests/unit/application/test_scraping_configuration_service.py::TestScrapingConfigurationService::test_validate_url_none PASSED [ 14%]
tests/unit/application/test_web_scraping_service.py::TestWebScrapingService::test_successful_scraping_workflow PASSED [ 14%]
tests/unit/application/test_web_scraping_service.py::TestWebScrapingService::test_navigation_error_handling PASSED [ 14%]
tests/unit/application/test_web_scraping_service.py::TestWebScrapingService::test_content_processing_error_handling PASSED [ 14%]
tests/unit/application/test_web_scraping_service.py::TestWebScrapingService::test_content_too_short_validation PASSED [ 14%]
tests/unit/application/test_web_scraping_service.py::TestWebScrapingService::test_final_url_normalization_from_browser_response PASSED [ 15%]
tests/unit/domain/test_constants.py::TestTimeoutConstants::test_click_timeout_constant PASSED [ 15%]
tests/unit/domain/test_constants.py::TestTimeoutConstants::test_milliseconds_conversion PASSED [ 15%]
tests/unit/domain/test_constants.py::TestMemoryConstants::test_bytes_per_kb_constant PASSED [ 15%]
tests/unit/domain/test_constants.py::TestMemoryConstants::test_bytes_per_mb_constant PASSED [ 15%]
tests/unit/domain/test_constants.py::TestMemoryConstants::test_mb_per_kb_constant PASSED [ 16%]
tests/unit/domain/test_constants.py::TestMemoryConstants::test_memory_calculation_consistency PASSED [ 16%]
tests/unit/domain/test_constants.py::TestProcessingConstants::test_chunk_node_limit PASSED [ 16%]
tests/unit/domain/test_constants.py::TestProcessingConstants::test_chunk_size_threshold PASSED [ 16%]
tests/unit/domain/test_constants.py::TestProcessingConstants::test_memory_threshold_multiplier PASSED [ 16%]
tests/unit/domain/test_constants.py::TestContentConstants::test_large_content_threshold PASSED [ 17%]
tests/unit/domain/test_constants.py::TestBrowserConstants::test_default_viewports_structure PASSED [ 17%]
tests/unit/domain/test_constants.py::TestBrowserConstants::test_default_user_agents_structure PASSED [ 17%]
tests/unit/domain/test_constants.py::TestBrowserConstants::test_default_accept_languages_structure PASSED [ 17%]
tests/unit/domain/test_constants.py::TestErrorPatternConstants::test_not_found_patterns_structure PASSED [ 17%]
tests/unit/domain/test_constants.py::TestErrorPatternConstants::test_cloudflare_patterns_structure PASSED [ 18%]
tests/unit/domain/test_constants.py::TestConstantValues::test_timeout_values_reasonable PASSED [ 18%]
tests/unit/domain/test_constants.py::TestConstantValues::test_memory_values_reasonable PASSED [ 18%]
tests/unit/domain/test_constants.py::TestConstantValues::test_content_values_reasonable PASSED [ 18%]
tests/unit/domain/test_value_objects.py::TestTimeoutValue::test_timeout_creation_with_seconds PASSED [ 18%]
tests/unit/domain/test_value_objects.py::TestTimeoutValue::test_timeout_creation_from_milliseconds PASSED [ 19%]
tests/unit/domain/test_value_objects.py::TestTimeoutValue::test_timeout_validation_positive_values PASSED [ 19%]
tests/unit/domain/test_value_objects.py::TestTimeoutValue::test_timeout_validation_maximum_values PASSED [ 19%]
tests/unit/domain/test_value_objects.py::TestTimeoutValue::test_timeout_string_representation PASSED [ 19%]
tests/unit/domain/test_value_objects.py::TestTimeoutValue::test_timeout_comparison PASSED [ 19%]
tests/unit/domain/test_value_objects.py::TestMemorySize::test_memory_size_creation_mb PASSED [ 20%]
tests/unit/domain/test_value_objects.py::TestMemorySize::test_memory_size_creation_from_bytes PASSED [ 20%]
tests/unit/domain/test_value_objects.py::TestMemorySize::test_memory_size_creation_from_kb PASSED [ 20%]
tests/unit/domain/test_value_objects.py::TestMemorySize::test_memory_size_validation PASSED [ 20%]
tests/unit/domain/test_value_objects.py::TestMemorySize::test_memory_size_string_representation PASSED [ 20%]
tests/unit/domain/test_value_objects.py::TestMemorySize::test_memory_size_comparison PASSED [ 21%]
tests/unit/domain/test_value_objects.py::TestMemorySize::test_memory_size_arithmetic PASSED [ 21%]
tests/unit/domain/test_value_objects.py::TestScrapingConfig::test_config_creation_with_defaults PASSED [ 21%]
tests/unit/domain/test_value_objects.py::TestScrapingConfig::test_config_creation_with_custom_values PASSED [ 21%]
tests/unit/domain/test_value_objects.py::TestScrapingConfig::test_config_url_validation PASSED [ 21%]
tests/unit/domain/test_value_objects.py::TestScrapingConfig::test_config_max_length_validation PASSED [ 22%]
tests/unit/domain/test_value_objects.py::TestScrapingConfig::test_config_immutability PASSED [ 22%]
tests/unit/domain/test_value_objects.py::TestScrapingConfig::test_config_to_dict PASSED [ 22%]
tests/unit/domain/test_value_objects.py::TestScrapingConfig::test_config_from_dict PASSED [ 22%]
tests/unit/infrastructure/test_browser_automation.py::TestBrowserAutomationInterface::test_successful_navigation PASSED [ 22%]
tests/unit/infrastructure/test_browser_automation.py::TestBrowserAutomationInterface::test_failed_navigation PASSED [ 23%]
tests/unit/infrastructure/test_browser_automation.py::TestBrowserAutomationInterface::test_get_page_content PASSED [ 23%]
tests/unit/infrastructure/test_browser_automation.py::TestBrowserAutomationInterface::test_wait_for_content_stabilization_success PASSED [ 23%]
tests/unit/infrastructure/test_browser_automation.py::TestBrowserAutomationInterface::test_wait_for_content_stabilization_timeout PASSED [ 23%]
tests/unit/infrastructure/test_browser_automation.py::TestBrowserAutomationInterface::test_click_element_success PASSED [ 23%]
tests/unit/infrastructure/test_browser_automation.py::TestBrowserAutomationInterface::test_click_element_failure PASSED [ 24%]
tests/unit/infrastructure/test_browser_automation.py::TestBrowserAutomationInterface::test_browser_cleanup PASSED [ 24%]
tests/unit/infrastructure/test_browser_automation.py::TestBrowserConfiguration::test_browser_configuration_creation PASSED [ 24%]
tests/unit/infrastructure/test_browser_automation.py::TestBrowserConfiguration::test_browser_configuration_immutability PASSED [ 24%]
tests/unit/infrastructure/test_browser_automation.py::TestBrowserAutomationFactory::test_create_browser PASSED [ 24%]
tests/unit/infrastructure/test_fallback_browser_automation.py::TestFallbackBrowserAutomation::test_successful_navigation_with_playwright PASSED [ 25%]
tests/unit/infrastructure/test_fallback_browser_automation.py::TestFallbackBrowserAutomation::test_fallback_to_requests_on_playwright_failure PASSED [ 25%]
tests/unit/infrastructure/test_fallback_browser_automation.py::TestFallbackBrowserAutomation::test_all_strategies_fail PASSED [ 25%]
tests/unit/infrastructure/test_fallback_browser_automation.py::TestFallbackBrowserAutomation::test_get_page_content_returns_cached_content PASSED [ 25%]
tests/unit/infrastructure/test_fallback_browser_automation.py::TestFallbackBrowserAutomation::test_wait_for_content_stabilization_always_returns_true PASSED [ 25%]
tests/unit/infrastructure/test_fallback_browser_automation.py::TestFallbackBrowserAutomation::test_click_element_not_supported 
-------------------------------- live log call ---------------------------------
2025-07-01 13:13:11 [ WARNING] Element clicking not supported in fallback mode (selector: button.submit) (logger.py:47)
PASSED                                                                   [ 25%]
tests/unit/infrastructure/test_fallback_browser_automation.py::TestFallbackBrowserAutomation::test_close_cleanup PASSED [ 26%]
tests/unit/infrastructure/test_fallback_browser_automation.py::TestFallbackBrowserAutomation::test_custom_headers_passed_to_scraper PASSED [ 26%]
tests/unit/infrastructure/test_fallback_browser_automation.py::TestFallbackBrowserFactory::test_create_browser_returns_fallback_automation 
-------------------------------- live log call ---------------------------------
2025-07-01 13:13:11 [    INFO] Created fallback browser with timeout=30s, resource_blocking=enabled (logger.py:43)
PASSED                                                                   [ 26%]
tests/unit/infrastructure/test_fallback_browser_automation.py::TestFallbackBrowserFactory::test_factory_creates_optimized_fallback_config 
-------------------------------- live log call ---------------------------------
2025-07-01 13:13:11 [    INFO] Created fallback browser with timeout=30s, resource_blocking=enabled (logger.py:43)
PASSED                                                                   [ 26%]
tests/unit/infrastructure/test_fallback_browser_automation.py::TestFallbackBrowserFactory::test_factory_handles_different_configurations 
-------------------------------- live log call ---------------------------------
2025-07-01 13:13:11 [    INFO] Created fallback browser with timeout=10s, resource_blocking=enabled (logger.py:43)
2025-07-01 13:13:11 [    INFO] Created fallback browser with timeout=60s, resource_blocking=enabled (logger.py:43)
PASSED                                                                   [ 26%]
tests/unit/infrastructure/test_fallback_browser_automation.py::TestFallbackBrowserFactory::test_factory_creates_browser_with_performance_metrics FAILED [ 27%]
tests/unit/infrastructure/test_fallback_browser_automation.py::TestIntegrationWithExistingServices::test_integration_with_web_scraping_service FAILED [ 27%]
tests/unit/infrastructure/test_fallback_browser_automation.py::TestIntegrationWithExistingServices::test_fallback_browser_implements_interface_correctly PASSED [ 27%]
tests/unit/infrastructure/test_fallback_browser_automation.py::TestPerformanceAndReliability::test_performance_metrics_collection SKIPPED [ 27%]
tests/unit/infrastructure/test_fallback_browser_automation.py::TestPerformanceAndReliability::test_circuit_breaker_integration SKIPPED [ 27%]
tests/unit/infrastructure/test_fallback_browser_automation.py::test_fallback_called_when_playwright_fails FAILED [ 28%]
tests/unit/infrastructure/test_fallback_scraper.py::TestCircuitBreaker::test_circuit_breaker_opens_after_threshold[3] 
-------------------------------- live log call ---------------------------------
2025-07-01 13:13:11 [ WARNING] Circuit breaker OPENED. (logger.py:47)
PASSED                                                                   [ 28%]
tests/unit/infrastructure/test_fallback_scraper.py::TestCircuitBreaker::test_circuit_breaker_opens_after_threshold[5] 
-------------------------------- live log call ---------------------------------
2025-07-01 13:13:11 [ WARNING] Circuit breaker OPENED. (logger.py:47)
PASSED                                                                   [ 28%]
tests/unit/infrastructure/test_fallback_scraper.py::TestCircuitBreaker::test_circuit_breaker_resets_on_success PASSED [ 28%]
tests/unit/infrastructure/test_fallback_scraper.py::TestCircuitBreaker::test_circuit_breaker_enters_half_open_after_timeout 
-------------------------------- live log call ---------------------------------
2025-07-01 13:13:11 [ WARNING] Circuit breaker OPENED. (logger.py:47)
2025-07-01 13:13:11 [    INFO] Circuit breaker moved to HALF_OPEN state. (logger.py:43)
PASSED                                                                   [ 28%]
tests/unit/infrastructure/test_fallback_scraper.py::TestCircuitBreaker::test_circuit_breaker_resets_fully_after_success_in_half_open 
-------------------------------- live log call ---------------------------------
2025-07-01 13:13:11 [ WARNING] Circuit breaker OPENED. (logger.py:47)
2025-07-01 13:13:11 [    INFO] Circuit breaker moved to HALF_OPEN state. (logger.py:43)
2025-07-01 13:13:11 [    INFO] Circuit breaker RESET to CLOSED state. (logger.py:43)
PASSED                                                                   [ 29%]
tests/unit/infrastructure/test_fallback_scraper.py::TestCircuitBreaker::test_circuit_breaker_reopens_on_failure_in_half_open 
-------------------------------- live log call ---------------------------------
2025-07-01 13:13:11 [ WARNING] Circuit breaker OPENED. (logger.py:47)
2025-07-01 13:13:11 [    INFO] Circuit breaker moved to HALF_OPEN state. (logger.py:43)
2025-07-01 13:13:11 [ WARNING] Circuit breaker OPENED. (logger.py:47)
PASSED                                                                   [ 29%]
tests/unit/infrastructure/test_fallback_scraper.py::TestIntelligentFallbackScraper::test_scrape_with_playwright_success PASSED [ 29%]
tests/unit/infrastructure/test_fallback_scraper.py::TestIntelligentFallbackScraper::test_playwright_page_crashed_triggers_fallback 
-------------------------------- live log call ---------------------------------
2025-07-01 13:13:11 [ WARNING] Playwright strategy failed for https://example.com: Page crashed (logger.py:47)
PASSED                                                                   [ 29%]
tests/unit/infrastructure/test_fallback_scraper.py::TestIntelligentFallbackScraper::test_resource_blocking_configuration PASSED [ 29%]
tests/unit/infrastructure/test_fallback_scraper.py::TestIntelligentFallbackScraper::test_circuit_breaker_pattern 
-------------------------------- live log call ---------------------------------
2025-07-01 13:13:11 [   ERROR] Unexpected error in Playwright strategy for https://example.com: Browser launch failed (logger.py:51)
2025-07-01 13:13:11 [   ERROR] Unexpected error in Playwright strategy for https://example.com: Browser launch failed (logger.py:51)
2025-07-01 13:13:11 [   ERROR] Unexpected error in Playwright strategy for https://example.com: Browser launch failed (logger.py:51)
2025-07-01 13:13:11 [   ERROR] Unexpected error in Playwright strategy for https://example.com: Browser launch failed (logger.py:51)
2025-07-01 13:13:11 [   ERROR] Unexpected error in Playwright strategy for https://example.com: Browser launch failed (logger.py:51)
2025-07-01 13:13:11 [   ERROR] Unexpected error in Playwright strategy for https://example.com: Browser launch failed (logger.py:51)
PASSED                                                                   [ 30%]
tests/unit/infrastructure/test_fallback_scraper.py::TestIntelligentFallbackScraper::test_retry_mechanism_with_exponential_backoff PASSED [ 30%]
tests/unit/infrastructure/test_fallback_scraper.py::TestIntelligentFallbackScraper::test_both_strategies_fail 
-------------------------------- live log call ---------------------------------
2025-07-01 13:13:11 [ WARNING] Playwright strategy failed for https://example.com: Playwright timed out (logger.py:47)
PASSED                                                                   [ 30%]
tests/unit/infrastructure/test_fallback_scraper.py::TestIntelligentFallbackScraper::test_performance_metrics_collection PASSED [ 30%]
tests/unit/infrastructure/test_fallback_scraper.py::TestIntelligentFallbackScraper::test_custom_user_agent_and_headers PASSED [ 30%]
tests/unit/infrastructure/test_fallback_scraper.py::TestIntelligentFallbackScraper::test_fallback_config_validation PASSED [ 31%]
tests/unit/infrastructure/test_fallback_scraper.py::TestIntelligentFallbackScraper::test_content_extraction_and_cleaning PASSED [ 31%]
tests/unit/infrastructure/test_fallback_scraper.py::TestIntelligentFallbackScraper::test_playwright_succeeds_first_try PASSED [ 31%]
tests/unit/infrastructure/test_fallback_scraper.py::TestIntelligentFallbackScraper::test_fallback_to_requests_on_playwright_failure 
-------------------------------- live log call ---------------------------------
2025-07-01 13:13:11 [ WARNING] Playwright strategy failed for https://example.com: Playwright failed (logger.py:47)
PASSED                                                                   [ 31%]
tests/unit/infrastructure/test_fallback_scraper.py::TestScrapingResult::test_scraping_result_creation PASSED [ 31%]
tests/unit/infrastructure/test_fallback_scraper.py::TestScrapingResult::test_failed_scraping_result PASSED [ 32%]
tests/unit/infrastructure/test_fallback_scraper.py::TestFallbackStrategy::test_fallback_strategy_values PASSED [ 32%]
tests/unit/infrastructure/test_fallback_scraper.py::TestCustomExceptions::test_page_crashed_error PASSED [ 32%]
tests/unit/infrastructure/test_fallback_scraper.py::TestCustomExceptions::test_scraping_error PASSED [ 32%]
tests/unit/infrastructure/test_memory_monitor.py::TestMemoryMonitor::test_memory_monitor_initialization PASSED [ 32%]
tests/unit/infrastructure/test_memory_monitor.py::TestMemoryMonitor::test_memory_monitor_custom_initialization PASSED [ 33%]
tests/unit/infrastructure/test_memory_monitor.py::TestMemoryMonitor::test_get_memory_usage_success PASSED [ 33%]
tests/unit/infrastructure/test_memory_monitor.py::TestMemoryMonitor::test_get_memory_usage_failure 
-------------------------------- live log call ---------------------------------
2025-07-01 13:13:11 [ WARNING] Failed to get memory usage: Process not found (logger.py:47)
PASSED                                                                   [ 33%]
tests/unit/infrastructure/test_memory_monitor.py::TestMemoryMonitor::test_monitor_memory_usage_detailed PASSED [ 33%]
tests/unit/infrastructure/test_memory_monitor.py::TestMemoryMonitor::test_monitor_memory_usage_error_handling 
-------------------------------- live log call ---------------------------------
2025-07-01 13:13:11 [ WARNING] Failed to monitor memory usage: Access denied (logger.py:47)
PASSED                                                                   [ 33%]
tests/unit/infrastructure/test_memory_monitor.py::TestMemoryMonitor::test_check_memory_limit_within_limit PASSED [ 34%]
tests/unit/infrastructure/test_memory_monitor.py::TestMemoryMonitor::test_check_memory_limit_exceeds_limit PASSED [ 34%]
tests/unit/infrastructure/test_memory_monitor.py::TestMemoryMonitor::test_check_memory_limit_with_threshold PASSED [ 34%]
tests/unit/infrastructure/test_memory_monitor.py::TestMemoryMonitor::test_check_memory_limit_disabled PASSED [ 34%]
tests/unit/infrastructure/test_memory_monitor.py::TestMemoryMonitor::test_context_manager_functionality PASSED [ 34%]
tests/unit/infrastructure/test_memory_monitor.py::TestMemoryMonitor::test_context_manager_with_memory_limit_exceeded PASSED [ 35%]
tests/unit/infrastructure/test_memory_monitor.py::TestMemoryMonitor::test_memory_monitor_repr PASSED [ 35%]
tests/unit/infrastructure/test_processing_metrics.py::TestProcessingMetrics::test_processing_metrics_initialization PASSED [ 35%]
tests/unit/infrastructure/test_processing_metrics.py::TestProcessingMetrics::test_processing_metrics_custom_initialization PASSED [ 35%]
tests/unit/infrastructure/test_processing_metrics.py::TestProcessingMetrics::test_start_processing_timer PASSED [ 35%]
tests/unit/infrastructure/test_processing_metrics.py::TestProcessingMetrics::test_record_processing_success PASSED [ 36%]
tests/unit/infrastructure/test_processing_metrics.py::TestProcessingMetrics::test_record_processing_error PASSED [ 36%]
tests/unit/infrastructure/test_processing_metrics.py::TestProcessingMetrics::test_get_last_metrics_copy PASSED [ 36%]
tests/unit/infrastructure/test_processing_metrics.py::TestProcessingMetrics::test_disabled_metrics_collection PASSED [ 36%]
tests/unit/infrastructure/test_processing_metrics.py::TestProcessingMetrics::test_thread_safety PASSED [ 36%]
tests/unit/infrastructure/test_processing_metrics.py::TestProcessingMetrics::test_metrics_format_consistency PASSED [ 37%]
tests/unit/infrastructure/test_processing_metrics.py::TestProcessingMetrics::test_processing_time_calculation PASSED [ 37%]
tests/unit/infrastructure/test_processing_metrics.py::TestProcessingMetrics::test_metrics_data_types PASSED [ 37%]
tests/unit/infrastructure/test_processing_metrics.py::TestProcessingMetrics::test_context_manager_functionality PASSED [ 37%]
tests/unit/infrastructure/test_processing_metrics.py::TestProcessingMetrics::test_context_manager_with_error PASSED [ 37%]
tests/unit/refactor/test_async_await_standardization.py::TestRetryStrategyPatternAsyncStandardization::test_retry_strategy_execute_sync_should_be_deprecated PASSED [ 38%]
tests/unit/refactor/test_async_await_standardization.py::TestRetryStrategyPatternAsyncStandardization::test_standardized_retry_strategy_async_execution 
-------------------------------- live log call ---------------------------------
2025-07-01 13:13:11 [ WARNING] Async attempt 1 failed: First attempt fails. Retrying in 0.01s... (logger.py:47)
PASSED                                                                   [ 38%]
tests/unit/refactor/test_async_await_standardization.py::TestRetryStrategyPatternAsyncStandardization::test_standardized_retry_strategy_sync_function_adapter 
-------------------------------- live log call ---------------------------------
2025-07-01 13:13:11 [ WARNING] Sync-as-async attempt 1 failed: First attempt fails. Retrying in 0.01s... (logger.py:47)
PASSED                                                                   [ 38%]
tests/unit/refactor/test_async_await_standardization.py::TestRetryStrategyPatternAsyncStandardization::test_standardized_retry_uses_async_sleep 
-------------------------------- live log call ---------------------------------
2025-07-01 13:13:11 [ WARNING] Async attempt 1 failed: Always fails. Retrying in 0.01s... (logger.py:47)
2025-07-01 13:13:11 [   ERROR] Final async attempt 2 failed: Always fails (logger.py:51)
PASSED                                                                   [ 38%]
tests/unit/refactor/test_async_await_standardization.py::TestAsyncHTTPOperations::test_rate_limiting_is_fully_async PASSED [ 38%]
tests/unit/refactor/test_async_await_standardization.py::TestAsyncHTTPOperations::test_domain_extraction_async_compatible PASSED [ 39%]
tests/unit/refactor/test_async_await_standardization.py::TestAsyncErrorHandling::test_cloudflare_detection_async 
-------------------------------- live log call ---------------------------------
2025-07-01 13:13:11 [ WARNING] Cloudflare challenge detected in content (logger.py:47)
PASSED                                                                   [ 39%]
tests/unit/refactor/test_async_await_standardization.py::TestAsyncErrorHandling::test_async_navigation_error_handling 
-------------------------------- live log call ---------------------------------
2025-07-01 13:13:11 [   ERROR] Navigation failed for https://example.com: Navigation failed (logger.py:51)
PASSED                                                                   [ 39%]
tests/unit/refactor/test_async_await_standardization.py::TestAsyncContentProcessing::test_html_processing_async_pipeline PASSED [ 39%]
tests/unit/refactor/test_async_await_standardization.py::TestAsyncContentProcessing::test_async_content_extraction_pipeline PASSED [ 39%]
tests/unit/refactor/test_async_await_standardization.py::TestAsyncFileOperations::test_async_config_loading PASSED [ 40%]
tests/unit/refactor/test_async_await_standardization.py::TestAsyncFileOperations::test_async_settings_reload PASSED [ 40%]
tests/unit/refactor/test_async_await_standardization.py::TestAsyncConsistencyValidation::test_all_io_methods_are_async SKIPPED [ 40%]
tests/unit/refactor/test_async_await_standardization.py::TestAsyncConsistencyValidation::test_no_mixed_async_sync_patterns SKIPPED [ 40%]
tests/unit/refactor/test_async_await_standardization.py::TestAsyncConsistencyValidation::test_async_context_managers_work PASSED [ 40%]
tests/unit/refactor/test_async_await_standardization.py::TestAsyncConsistencyValidation::test_backward_compatibility_maintained PASSED [ 41%]
tests/unit/refactor/test_async_await_standardization.py::TestAsyncPerformance::test_concurrent_operations_support PASSED [ 41%]
tests/unit/refactor/test_async_await_standardization.py::TestAsyncPerformance::test_async_timeout_handling PASSED [ 41%]
tests/unit/refactor/test_chunked_processor_refactor.py::TestChunkingStrategy::test_should_use_chunked_processing_small_content PASSED [ 41%]
tests/unit/refactor/test_chunked_processor_refactor.py::TestChunkingStrategy::test_should_use_chunked_processing_large_content PASSED [ 41%]
tests/unit/refactor/test_chunked_processor_refactor.py::TestChunkingStrategy::test_chunking_disabled PASSED [ 42%]
tests/unit/refactor/test_chunked_processor_refactor.py::TestContentProcessor::test_extract_title_with_title PASSED [ 42%]
tests/unit/refactor/test_chunked_processor_refactor.py::TestContentProcessor::test_extract_title_without_title PASSED [ 42%]
tests/unit/refactor/test_chunked_processor_refactor.py::TestFallbackHandler::test_execute_with_fallback_success PASSED [ 42%]
tests/unit/refactor/test_chunked_processor_refactor.py::TestFallbackHandler::test_execute_with_fallback_failure 
-------------------------------- live log call ---------------------------------
2025-07-01 13:13:13 [ WARNING] Primary operation failed: Test error (logger.py:47)
2025-07-01 13:13:13 [    INFO] Attempting fallback operation (logger.py:43)
PASSED                                                                   [ 42%]
tests/unit/refactor/test_chunked_processor_refactor.py::TestMemoryMonitor::test_memory_monitor_initialization PASSED [ 43%]
tests/unit/refactor/test_chunked_processor_refactor.py::TestRefactoredChunkedHTMLProcessor::test_processor_initialization_with_dependency_injection PASSED [ 43%]
tests/unit/refactor/test_chunked_processor_refactor.py::TestRefactoredChunkedHTMLProcessor::test_extract_content_small_html PASSED [ 43%]
tests/unit/refactor/test_chunked_processor_refactor.py::TestRefactoredChunkedHTMLProcessor::test_get_processing_metrics PASSED [ 43%]
tests/unit/refactor/test_chunked_processor_refactor.py::TestBackwardCompatibility::test_extract_clean_html_optimized_interface_preserved PASSED [ 43%]
tests/unit/refactor/test_chunked_processor_refactor.py::TestBackwardCompatibility::test_create_chunked_processor_factory PASSED [ 44%]
tests/unit/refactor/test_chunked_processor_refactor.py::TestBackwardCompatibility::test_single_responsibility_compliance PASSED [ 44%]
tests/unit/refactor/test_code_duplication_elimination.py::TestCentralizedHTMLExtractor::test_html_extractor_exists PASSED [ 44%]
tests/unit/refactor/test_code_duplication_elimination.py::TestCentralizedHTMLExtractor::test_centralized_extractor_single_responsibility PASSED [ 44%]
tests/unit/refactor/test_code_duplication_elimination.py::TestExtractionConfig::test_extraction_config_initialization PASSED [ 44%]
tests/unit/refactor/test_code_duplication_elimination.py::TestBackwardCompatibilityLayer::test_original_extract_clean_html_interface_preserved PASSED [ 45%]
tests/unit/refactor/test_code_duplication_elimination.py::TestBackwardCompatibilityLayer::test_all_interfaces_use_central_implementation PASSED [ 45%]
tests/unit/refactor/test_content_processing_interfaces.py::TestIHTMLParser::test_html_parser_interface_creation PASSED [ 45%]
tests/unit/refactor/test_content_processing_interfaces.py::TestIHTMLParser::test_html_parser_interface_methods PASSED [ 45%]
tests/unit/refactor/test_content_processing_interfaces.py::TestIHTMLParser::test_beautiful_soup_adapter_implementation PASSED [ 45%]
tests/unit/refactor/test_content_processing_interfaces.py::TestIHTMLParser::test_beautiful_soup_adapter_parse_html PASSED [ 46%]
tests/unit/refactor/test_content_processing_interfaces.py::TestIHTMLParser::test_beautiful_soup_adapter_extract_title PASSED [ 46%]
tests/unit/refactor/test_content_processing_interfaces.py::TestIHTMLParser::test_beautiful_soup_adapter_extract_text PASSED [ 46%]
tests/unit/refactor/test_content_processing_interfaces.py::TestIHTMLParser::test_beautiful_soup_adapter_remove_elements PASSED [ 46%]
tests/unit/refactor/test_content_processing_interfaces.py::TestIContentCleaner::test_content_cleaner_interface_creation PASSED [ 46%]
tests/unit/refactor/test_content_processing_interfaces.py::TestIContentCleaner::test_content_cleaner_interface_methods PASSED [ 47%]
tests/unit/refactor/test_content_processing_interfaces.py::TestIContentCleaner::test_default_content_cleaner_implementation PASSED [ 47%]
tests/unit/refactor/test_content_processing_interfaces.py::TestIContentCleaner::test_default_content_cleaner_clean_html PASSED [ 47%]
tests/unit/refactor/test_content_processing_interfaces.py::TestIContentCleaner::test_default_content_cleaner_extract_main_content PASSED [ 47%]
tests/unit/refactor/test_content_processing_interfaces.py::TestIContentCleaner::test_default_content_cleaner_validate_content_length 
-------------------------------- live log call ---------------------------------
2025-07-01 13:13:13 [ WARNING] No significant text content extracted (length < 10) at https://example.com (logger.py:47)
PASSED                                                                   [ 47%]
tests/unit/refactor/test_content_processing_interfaces.py::TestIContentFormatter::test_content_formatter_interface_creation PASSED [ 48%]
tests/unit/refactor/test_content_processing_interfaces.py::TestIContentFormatter::test_content_formatter_interface_methods PASSED [ 48%]
tests/unit/refactor/test_content_processing_interfaces.py::TestIContentFormatter::test_default_content_formatter_implementation PASSED [ 48%]
tests/unit/refactor/test_content_processing_interfaces.py::TestIContentFormatter::test_default_content_formatter_format_to_markdown PASSED [ 48%]
tests/unit/refactor/test_content_processing_interfaces.py::TestIContentFormatter::test_default_content_formatter_format_to_text PASSED [ 48%]
tests/unit/refactor/test_content_processing_interfaces.py::TestIContentFormatter::test_default_content_formatter_format_to_html PASSED [ 49%]
tests/unit/refactor/test_content_processing_interfaces.py::TestIContentFormatter::test_default_content_formatter_truncate_content PASSED [ 49%]
tests/unit/refactor/test_content_processing_interfaces.py::TestRefactoredContentProcessingService::test_refactored_service_creation_with_dependencies PASSED [ 49%]
tests/unit/refactor/test_content_processing_interfaces.py::TestRefactoredContentProcessingService::test_refactored_service_process_html_content PASSED [ 49%]
tests/unit/refactor/test_content_processing_interfaces.py::TestRefactoredContentProcessingService::test_refactored_service_format_content PASSED [ 49%]
tests/unit/refactor/test_content_processing_interfaces.py::TestBackwardCompatibility::test_original_service_interface_maintained PASSED [ 50%]
tests/unit/refactor/test_content_processing_interfaces.py::TestBackwardCompatibility::test_dependency_injection_integration PASSED [ 50%]
tests/unit/refactor/test_dependency_injection_refactor.py::TestDependencyInterfaces::test_browser_factory_interface_exists PASSED [ 50%]
tests/unit/refactor/test_dependency_injection_refactor.py::TestDependencyInterfaces::test_content_processing_interface_exists PASSED [ 50%]
tests/unit/refactor/test_dependency_injection_refactor.py::TestDependencyInterfaces::test_scraping_configuration_interface_exists PASSED [ 50%]
tests/unit/refactor/test_dependency_injection_refactor.py::TestDependencyInterfaces::test_web_scraping_interface_exists PASSED [ 50%]
tests/unit/refactor/test_dependency_injection_refactor.py::TestDependencyInjectionContainer::test_di_container_initialization PASSED [ 51%]
tests/unit/refactor/test_dependency_injection_refactor.py::TestDependencyInjectionContainer::test_di_container_register_transient PASSED [ 51%]
tests/unit/refactor/test_dependency_injection_refactor.py::TestDependencyInjectionContainer::test_di_container_register_singleton PASSED [ 51%]
tests/unit/refactor/test_dependency_injection_refactor.py::TestDependencyInjectionContainer::test_di_container_resolve_with_dependencies PASSED [ 51%]
tests/unit/refactor/test_dependency_injection_refactor.py::TestServiceFactory::test_service_factory_initialization PASSED [ 51%]
tests/unit/refactor/test_dependency_injection_refactor.py::TestServiceFactory::test_service_factory_create_web_scraping_service PASSED [ 52%]
tests/unit/refactor/test_dependency_injection_refactor.py::TestServiceFactory::test_service_factory_create_mcp_request_handler PASSED [ 52%]
tests/unit/refactor/test_dependency_injection_refactor.py::TestApplicationBootstrap::test_application_bootstrap_initialization PASSED [ 52%]
tests/unit/refactor/test_dependency_injection_refactor.py::TestApplicationBootstrap::test_application_bootstrap_configure_dependencies PASSED [ 52%]
tests/unit/refactor/test_dependency_injection_refactor.py::TestApplicationBootstrap::test_application_bootstrap_create_server 
-------------------------------- live log call ---------------------------------
2025-07-01 13:13:13 [    INFO] Inicializando servidor MCP com Dependency Injection (logger.py:43)
2025-07-01 13:13:13 [    INFO] Servidor MCP configurado com sucesso via DI (logger.py:43)
PASSED                                                                   [ 52%]
tests/unit/refactor/test_dependency_injection_refactor.py::TestRefactoredMain::test_main_serve_uses_dependency_injection 
-------------------------------- live log call ---------------------------------
2025-07-01 13:13:13 [    INFO] Starting MCP web scrapper server with Dependency Injection (stdio mode) (logger.py:43)
PASSED                                                                   [ 53%]
tests/unit/refactor/test_dependency_injection_refactor.py::TestRefactoredMain::test_main_no_hardcoded_dependencies PASSED [ 53%]
tests/unit/refactor/test_dependency_injection_refactor.py::TestRefactoredMain::test_main_uses_bootstrap_pattern PASSED [ 53%]
tests/unit/refactor/test_dependency_injection_refactor.py::TestBackwardCompatibility::test_server_tools_still_work 
-------------------------------- live log call ---------------------------------
2025-07-01 13:13:13 [    INFO] Starting MCP web scrapper server with Dependency Injection (stdio mode) (logger.py:43)
PASSED                                                                   [ 53%]
tests/unit/refactor/test_dependency_injection_refactor.py::TestBackwardCompatibility::test_dip_compliance_achieved PASSED [ 53%]
tests/unit/refactor/test_error_handling_standardization.py::TestScraperErrorBase::test_scraper_error_basic_creation PASSED [ 54%]
tests/unit/refactor/test_error_handling_standardization.py::TestScraperErrorBase::test_scraper_error_full_creation PASSED [ 54%]
tests/unit/refactor/test_error_handling_standardization.py::TestScraperErrorBase::test_scraper_error_to_dict PASSED [ 54%]
tests/unit/refactor/test_error_handling_standardization.py::TestScraperErrorBase::test_scraper_error_to_dict_no_original_exception PASSED [ 54%]
tests/unit/refactor/test_error_handling_standardization.py::TestNavigationErrors::test_navigation_error_creation PASSED [ 54%]
tests/unit/refactor/test_error_handling_standardization.py::TestNavigationErrors::test_timeout_error_creation PASSED [ 55%]
tests/unit/refactor/test_error_handling_standardization.py::TestNavigationErrors::test_browser_error_creation PASSED [ 55%]
tests/unit/refactor/test_error_handling_standardization.py::TestContentErrors::test_content_extraction_error PASSED [ 55%]
tests/unit/refactor/test_error_handling_standardization.py::TestContentErrors::test_parsing_error PASSED [ 55%]
tests/unit/refactor/test_error_handling_standardization.py::TestContentErrors::test_content_validation_error PASSED [ 55%]
tests/unit/refactor/test_error_handling_standardization.py::TestNetworkErrors::test_network_error PASSED [ 56%]
tests/unit/refactor/test_error_handling_standardization.py::TestNetworkErrors::test_rate_limit_error PASSED [ 56%]
tests/unit/refactor/test_error_handling_standardization.py::TestNetworkErrors::test_cloudflare_block_error PASSED [ 56%]
tests/unit/refactor/test_error_handling_standardization.py::TestSystemErrors::test_configuration_error PASSED [ 56%]
tests/unit/refactor/test_error_handling_standardization.py::TestSystemErrors::test_resource_error PASSED [ 56%]
tests/unit/refactor/test_error_handling_standardization.py::TestSystemErrors::test_memory_error PASSED [ 57%]
tests/unit/refactor/test_error_handling_standardization.py::TestValidationErrors::test_validation_error PASSED [ 57%]
tests/unit/refactor/test_error_handling_standardization.py::TestValidationErrors::test_url_validation_error PASSED [ 57%]
tests/unit/refactor/test_error_handling_standardization.py::TestUtilityFunctions::test_wrap_exception PASSED [ 57%]
tests/unit/refactor/test_error_handling_standardization.py::TestUtilityFunctions::test_is_recoverable_error_scraper_error PASSED [ 57%]
tests/unit/refactor/test_error_handling_standardization.py::TestUtilityFunctions::test_is_recoverable_error_generic_exceptions PASSED [ 58%]
tests/unit/refactor/test_error_handling_standardization.py::TestUtilityFunctions::test_get_retry_delay_scraper_error PASSED [ 58%]
tests/unit/refactor/test_error_handling_standardization.py::TestUtilityFunctions::test_get_retry_delay_generic_exceptions PASSED [ 58%]
tests/unit/refactor/test_error_handling_standardization.py::TestErrorHierarchy::test_all_errors_inherit_from_scraper_error PASSED [ 58%]
tests/unit/refactor/test_error_handling_standardization.py::TestErrorHierarchy::test_memory_error_inherits_from_resource_error PASSED [ 58%]
tests/unit/refactor/test_error_handling_standardization.py::TestErrorHierarchy::test_url_validation_error_inherits_from_validation_error PASSED [ 59%]
tests/unit/refactor/test_error_handling_standardization.py::TestErrorContext::test_error_context_preservation PASSED [ 59%]
tests/unit/refactor/test_error_handling_standardization.py::TestErrorContext::test_error_chaining PASSED [ 59%]
tests/unit/refactor/test_error_handling_standardization.py::TestErrorHandlingIntegration::test_error_handling_workflow PASSED [ 59%]
tests/unit/refactor/test_error_handling_standardization.py::TestErrorHandlingIntegration::test_non_recoverable_error_workflow PASSED [ 59%]
tests/unit/refactor/test_extract_text_refactor.py::TestURLValidator::test_validate_valid_url PASSED [ 60%]
tests/unit/refactor/test_extract_text_refactor.py::TestURLValidator::test_validate_invalid_url PASSED [ 60%]
tests/unit/refactor/test_extract_text_refactor.py::TestURLValidator::test_normalize_url PASSED [ 60%]
tests/unit/refactor/test_extract_text_refactor.py::TestContentExtractor::test_extract_content_success PASSED [ 60%]
tests/unit/refactor/test_extract_text_refactor.py::TestContentExtractor::test_extract_content_error_handling 
-------------------------------- live log call ---------------------------------
2025-07-01 13:13:13 [   ERROR] Erro durante extração de <AsyncMock name='mock.url' id='129863041968656'>: Network error (logger.py:51)
PASSED                                                                   [ 60%]
tests/unit/refactor/test_extract_text_refactor.py::TestOutputFormatter::test_format_to_markdown PASSED [ 61%]
tests/unit/refactor/test_extract_text_refactor.py::TestOutputFormatter::test_format_to_text PASSED [ 61%]
tests/unit/refactor/test_extract_text_refactor.py::TestOutputFormatter::test_truncate_content PASSED [ 61%]
tests/unit/refactor/test_extract_text_refactor.py::TestScrapingOrchestrator::test_scrape_url_success_integration PASSED [ 61%]
tests/unit/refactor/test_extract_text_refactor.py::TestScrapingOrchestrator::test_scrape_url_invalid_url PASSED [ 61%]
tests/unit/refactor/test_extract_text_refactor.py::TestScrapingOrchestrator::test_scraping_orchestrator_srp PASSED [ 62%]
tests/unit/refactor/test_extract_text_refactor.py::TestScrapingOrchestrator::test_scrape_with_custom_timeout PASSED [ 62%]
tests/unit/refactor/test_extract_text_refactor.py::TestBackwardCompatibility::test_extract_text_from_url_interface_preserved PASSED [ 62%]
tests/unit/refactor/test_fallback_scraper_refactor.py::TestCircuitBreakerPattern::test_circuit_breaker_initialization PASSED [ 62%]
tests/unit/refactor/test_fallback_scraper_refactor.py::TestCircuitBreakerPattern::test_circuit_breaker_records_failure 
-------------------------------- live log call ---------------------------------
2025-07-01 13:13:15 [ WARNING] Circuit breaker OPENED. (logger.py:47)
PASSED                                                                   [ 62%]
tests/unit/refactor/test_fallback_scraper_refactor.py::TestCircuitBreakerPattern::test_circuit_breaker_records_success PASSED [ 63%]
tests/unit/refactor/test_fallback_scraper_refactor.py::TestCircuitBreakerPattern::test_circuit_breaker_half_open_recovery 
-------------------------------- live log call ---------------------------------
1970-01-01 00:01:40 [ WARNING] Circuit breaker OPENED. (logger.py:47)
1970-01-01 00:01:45 [    INFO] Circuit breaker moved to HALF_OPEN state. (logger.py:43)
PASSED                                                                   [ 63%]
tests/unit/refactor/test_fallback_scraper_refactor.py::TestRetryStrategyPattern::test_retry_strategy_success_first_attempt PASSED [ 63%]
tests/unit/refactor/test_fallback_scraper_refactor.py::TestRetryStrategyPattern::test_retry_strategy_success_after_retries 
-------------------------------- live log call ---------------------------------
2025-07-01 13:13:15 [ WARNING] Attempt 1 failed: Attempt 1 failed. Retrying in 0.01s... (logger.py:47)
2025-07-01 13:13:15 [ WARNING] Attempt 2 failed: Attempt 2 failed. Retrying in 0.02s... (logger.py:47)
PASSED                                                                   [ 63%]
tests/unit/refactor/test_fallback_scraper_refactor.py::TestRetryStrategyPattern::test_retry_strategy_max_retries_exceeded 
-------------------------------- live log call ---------------------------------
2025-07-01 13:13:15 [ WARNING] Attempt 1 failed: Always fails. Retrying in 0.01s... (logger.py:47)
2025-07-01 13:13:15 [ WARNING] Attempt 2 failed: Always fails. Retrying in 0.02s... (logger.py:47)
2025-07-01 13:13:15 [   ERROR] Final attempt 3 failed: Always fails (logger.py:51)
PASSED                                                                   [ 63%]
tests/unit/refactor/test_fallback_scraper_refactor.py::TestRetryStrategyPattern::test_retry_strategy_uses_exponential_backoff 
-------------------------------- live log call ---------------------------------
2025-07-01 13:13:15 [ WARNING] Attempt 1 failed: Strategy failed. Retrying in 0.10s... (logger.py:47)
2025-07-01 13:13:15 [ WARNING] Attempt 2 failed: Strategy failed. Retrying in 0.20s... (logger.py:47)
2025-07-01 13:13:15 [ WARNING] Attempt 3 failed: Strategy failed. Retrying in 0.40s... (logger.py:47)
2025-07-01 13:13:16 [   ERROR] Final attempt 4 failed: Strategy failed (logger.py:51)
PASSED                                                                   [ 64%]
tests/unit/refactor/test_fallback_scraper_refactor.py::TestScrapingMetricsCollector::test_metrics_initialization PASSED [ 64%]
tests/unit/refactor/test_fallback_scraper_refactor.py::TestScrapingMetricsCollector::test_start_operation_timing PASSED [ 64%]
tests/unit/refactor/test_fallback_scraper_refactor.py::TestScrapingMetricsCollector::test_record_scraping_success PASSED [ 64%]
tests/unit/refactor/test_fallback_scraper_refactor.py::TestScrapingMetricsCollector::test_record_scraping_failure FAILED [ 64%]
tests/unit/refactor/test_fallback_scraper_refactor.py::TestPlaywrightScrapingStrategy::test_playwright_strategy_initialization PASSED [ 65%]
tests/unit/refactor/test_fallback_scraper_refactor.py::TestPlaywrightScrapingStrategy::test_playwright_strategy_scrape_url PASSED [ 65%]
tests/unit/refactor/test_fallback_scraper_refactor.py::TestRequestsScrapingStrategy::test_requests_strategy_initialization PASSED [ 65%]
tests/unit/refactor/test_fallback_scraper_refactor.py::TestRequestsScrapingStrategy::test_requests_strategy_scrape_url PASSED [ 65%]
tests/unit/refactor/test_fallback_scraper_refactor.py::TestFallbackOrchestrator::test_orchestrator_initialization_with_dependency_injection PASSED [ 65%]
tests/unit/refactor/test_fallback_scraper_refactor.py::TestFallbackOrchestrator::test_orchestrator_scrape_url_success PASSED [ 66%]
tests/unit/refactor/test_fallback_scraper_refactor.py::TestFallbackOrchestrator::test_orchestrator_fallback_to_requests 
-------------------------------- live log call ---------------------------------
2025-07-01 13:13:16 [   ERROR] Unexpected error in Playwright strategy for http://example.com: Playwright failed (logger.py:51)
PASSED                                                                   [ 66%]
tests/unit/refactor/test_fallback_scraper_refactor.py::TestFallbackOrchestrator::test_orchestrator_circuit_breaker_open PASSED [ 66%]
tests/unit/refactor/test_fallback_scraper_refactor.py::TestFallbackScraperRefactor::test_single_responsibility_compliance FAILED [ 66%]
tests/unit/refactor/test_health_checks_implementation.py::TestHealthStatus::test_health_status_values PASSED [ 66%]
tests/unit/refactor/test_health_checks_implementation.py::TestHealthMetric::test_health_metric_creation PASSED [ 67%]
tests/unit/refactor/test_health_checks_implementation.py::TestHealthReport::test_health_report_creation PASSED [ 67%]
tests/unit/refactor/test_health_checks_implementation.py::TestSystemHealthChecker::test_system_health_checker_creation PASSED [ 67%]
tests/unit/refactor/test_health_checks_implementation.py::TestHealthMonitor::test_health_monitor_creation PASSED [ 67%]
tests/unit/refactor/test_logging_system_improvement.py::TestLoggingSystemImprovement::test_logger_initialization PASSED [ 67%]
tests/unit/refactor/test_logging_system_improvement.py::TestLoggingSystemImprovement::test_logger_formatting 
-------------------------------- live log call ---------------------------------
2025-07-01 13:13:16 [    INFO] Test message (logger.py:43)
PASSED                                                                   [ 68%]
tests/unit/refactor/test_logging_system_improvement.py::TestLoggingSystemImprovement::test_logger_log_levels 
-------------------------------- live log call ---------------------------------
2025-07-01 13:13:16 [    INFO] Info message (logger.py:43)
2025-07-01 13:13:16 [ WARNING] Warning message (logger.py:47)
2025-07-01 13:13:16 [   ERROR] Error message (logger.py:51)
PASSED                                                                   [ 68%]
tests/unit/refactor/test_logging_system_improvement.py::TestLoggingSystemImprovement::test_debug_logs_environment_control PASSED [ 68%]
tests/unit/refactor/test_logging_system_improvement.py::TestLoggingSystemImprovement::test_print_statement_replacement_structure 
-------------------------------- live log call ---------------------------------
2025-07-01 13:13:16 [    INFO] Configured scraper with resource blocking: ['image', 'stylesheet', 'font'] (logger.py:43)
PASSED                                                                   [ 68%]
tests/unit/refactor/test_logging_system_improvement.py::TestLoggingSystemImprovement::test_test_output_logging_levels 
-------------------------------- live log call ---------------------------------
2025-07-01 13:13:16 [    INFO] Starting Intelligent Fallback System Demo (logger.py:43)
2025-07-01 13:13:16 [    INFO] Configured scraper with resource blocking: ['image', 'stylesheet'] (logger.py:43)
2025-07-01 13:13:16 [    INFO] Simulating 'Page crashed' error in Playwright... (logger.py:43)
2025-07-01 13:13:16 [    INFO] Fallback succeeded! Strategy: requests_fallback, Attempts: 2 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance acceptable: 1.23s (logger.py:43)
2025-07-01 13:13:16 [    INFO] SOLUTION VALIDATED: No more 'Page crashed' test failures (logger.py:43)
PASSED                                                                   [ 68%]
tests/unit/refactor/test_logging_system_improvement.py::TestLoggingSystemImprovement::test_logging_performance_impact 
-------------------------------- live log call ---------------------------------
2025-07-01 13:13:16 [    INFO] Performance test message 0 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 1 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 2 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 3 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 4 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 5 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 6 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 7 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 8 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 9 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 10 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 11 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 12 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 13 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 14 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 15 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 16 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 17 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 18 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 19 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 20 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 21 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 22 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 23 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 24 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 25 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 26 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 27 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 28 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 29 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 30 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 31 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 32 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 33 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 34 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 35 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 36 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 37 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 38 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 39 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 40 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 41 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 42 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 43 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 44 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 45 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 46 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 47 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 48 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 49 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 50 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 51 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 52 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 53 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 54 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 55 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 56 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 57 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 58 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 59 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 60 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 61 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 62 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 63 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 64 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 65 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 66 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 67 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 68 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 69 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 70 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 71 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 72 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 73 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 74 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 75 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 76 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 77 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 78 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 79 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 80 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 81 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 82 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 83 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 84 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 85 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 86 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 87 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 88 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 89 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 90 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 91 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 92 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 93 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 94 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 95 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 96 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 97 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 98 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Performance test message 99 (logger.py:43)
PASSED                                                                   [ 69%]
tests/unit/refactor/test_logging_system_improvement.py::TestLoggingSystemImprovement::test_structured_logging_format 
-------------------------------- live log call ---------------------------------
2025-07-01 13:13:16 [    INFO] Test completed successfully (logger.py:43)
PASSED                                                                   [ 69%]
tests/unit/refactor/test_logging_system_improvement.py::TestLoggingSystemImprovement::test_log_capture_in_tests 
-------------------------------- live log call ---------------------------------
2025-07-01 13:13:16 [ WARNING] This is a test warning (logger.py:47)
2025-07-01 13:13:16 [   ERROR] This is a test error (logger.py:51)
PASSED                                                                   [ 69%]
tests/unit/refactor/test_logging_system_improvement.py::TestLoggingSystemImprovement::test_backward_compatibility PASSED [ 69%]
tests/unit/refactor/test_logging_system_improvement.py::TestLoggingSystemImprovement::test_no_duplicate_handlers PASSED [ 69%]
tests/unit/refactor/test_logging_system_improvement.py::TestLoggingSystemImprovement::test_log_level_methods[debug-debug] PASSED [ 70%]
tests/unit/refactor/test_logging_system_improvement.py::TestLoggingSystemImprovement::test_log_level_methods[info-info] 
-------------------------------- live log call ---------------------------------
2025-07-01 13:13:16 [    INFO] Test info message (logger.py:43)
PASSED                                                                   [ 70%]
tests/unit/refactor/test_logging_system_improvement.py::TestLoggingSystemImprovement::test_log_level_methods[warning-warning] 
-------------------------------- live log call ---------------------------------
2025-07-01 13:13:16 [ WARNING] Test warning message (logger.py:47)
PASSED                                                                   [ 70%]
tests/unit/refactor/test_logging_system_improvement.py::TestLoggingSystemImprovement::test_log_level_methods[error-error] 
-------------------------------- live log call ---------------------------------
2025-07-01 13:13:16 [   ERROR] Test error message (logger.py:51)
PASSED                                                                   [ 70%]
tests/unit/refactor/test_logging_system_improvement.py::TestPrintStatementReplacement::test_emoji_logging_support 
-------------------------------- live log call ---------------------------------
2025-07-01 13:13:16 [    INFO] 🚀 Starting test with emoji (logger.py:43)
2025-07-01 13:13:16 [    INFO] ✅ Success with checkmark (logger.py:43)
2025-07-01 13:13:16 [    INFO] 🎯 Target achieved (logger.py:43)
PASSED                                                                   [ 70%]
tests/unit/refactor/test_logging_system_improvement.py::TestPrintStatementReplacement::test_formatted_string_logging 
-------------------------------- live log call ---------------------------------
2025-07-01 13:13:16 [    INFO] Strategy used: requests_fallback (logger.py:43)
2025-07-01 13:13:16 [    INFO] Attempts made: 2 (logger.py:43)
2025-07-01 13:13:16 [    INFO] Content length: 1234 characters (logger.py:43)
2025-07-01 13:13:16 [    INFO] Processing time: 1.23s (logger.py:43)
PASSED                                                                   [ 71%]
tests/unit/refactor/test_logging_system_improvement.py::TestPrintStatementReplacement::test_multiline_logging_replacement 
-------------------------------- live log call ---------------------------------
2025-07-01 13:13:16 [    INFO] SOLUTION VALIDATED: (logger.py:43)
2025-07-01 13:13:16 [    INFO]   ✅ No more 'Page crashed' test failures (logger.py:43)
2025-07-01 13:13:16 [    INFO]   ✅ Robust fallback to HTTP requests (logger.py:43)
2025-07-01 13:13:16 [    INFO]   ✅ Performance optimized with resource blocking (logger.py:43)
2025-07-01 13:13:16 [    INFO]   ✅ Circuit breaker prevents repeated failures (logger.py:43)
2025-07-01 13:13:16 [    INFO]   ✅ Content cleaning maintains quality (logger.py:43)
PASSED                                                                   [ 71%]
tests/unit/refactor/test_magic_numbers_elimination.py::TestTimeoutConstants::test_maximum_timeout_constant_exists PASSED [ 71%]
tests/unit/refactor/test_magic_numbers_elimination.py::TestTimeoutConstants::test_default_click_timeout_constant_exists PASSED [ 71%]
tests/unit/refactor/test_magic_numbers_elimination.py::TestTimeoutConstants::test_network_idle_timeout_constant_exists PASSED [ 71%]
tests/unit/refactor/test_magic_numbers_elimination.py::TestTimeoutConstants::test_selector_click_timeout_constant_exists PASSED [ 72%]
tests/unit/refactor/test_magic_numbers_elimination.py::TestHttpStatusConstants::test_http_success_status_constant_exists PASSED [ 72%]
tests/unit/refactor/test_magic_numbers_elimination.py::TestHttpStatusConstants::test_http_client_error_threshold_constant_exists PASSED [ 72%]
tests/unit/refactor/test_magic_numbers_elimination.py::TestMCPValidationConstants::test_max_content_length_constant_exists PASSED [ 72%]
tests/unit/refactor/test_magic_numbers_elimination.py::TestMCPValidationConstants::test_max_timeout_validation_constant_exists PASSED [ 72%]
tests/unit/refactor/test_magic_numbers_elimination.py::TestMCPValidationConstants::test_max_grace_period_validation_constant_exists PASSED [ 73%]
tests/unit/refactor/test_magic_numbers_elimination.py::TestDefaultConfigurationConstants::test_default_fallback_timeout_constant_exists PASSED [ 73%]
tests/unit/refactor/test_magic_numbers_elimination.py::TestDefaultConfigurationConstants::test_circuit_breaker_recovery_timeout_constant_exists PASSED [ 73%]
tests/unit/refactor/test_magic_numbers_elimination.py::TestDefaultConfigurationConstants::test_default_config_timeout_constant_exists PASSED [ 73%]
tests/unit/refactor/test_magic_numbers_elimination.py::TestMagicNumberUsageReplacement::test_timeout_value_uses_max_timeout_constant PASSED [ 73%]
tests/unit/refactor/test_magic_numbers_elimination.py::TestMagicNumberUsageReplacement::test_playwright_browser_uses_timeout_constants PASSED [ 74%]
tests/unit/refactor/test_magic_numbers_elimination.py::TestMagicNumberUsageReplacement::test_fallback_browser_uses_http_status_constants PASSED [ 74%]
tests/unit/refactor/test_magic_numbers_elimination.py::TestMagicNumberUsageReplacement::test_mcp_server_uses_validation_constants PASSED [ 74%]
tests/unit/refactor/test_magic_numbers_elimination.py::TestMagicNumberUsageReplacement::test_fallback_scraper_uses_timeout_constants PASSED [ 74%]
tests/unit/refactor/test_magic_numbers_elimination.py::TestConstantsDocumentation::test_timeout_constants_have_meaningful_names PASSED [ 74%]
tests/unit/refactor/test_magic_numbers_elimination.py::TestConstantsDocumentation::test_http_constants_have_meaningful_names PASSED [ 75%]
tests/unit/refactor/test_magic_numbers_elimination.py::TestConstantsDocumentation::test_validation_constants_have_meaningful_names PASSED [ 75%]
tests/unit/refactor/test_magic_numbers_elimination.py::TestMagicNumberEliminationCompleteness::test_no_magic_numbers_in_timeout_value PASSED [ 75%]
tests/unit/refactor/test_magic_numbers_elimination.py::TestMagicNumberEliminationCompleteness::test_no_magic_numbers_in_playwright_browser PASSED [ 75%]
tests/unit/refactor/test_magic_numbers_elimination.py::TestMagicNumberEliminationCompleteness::test_no_magic_numbers_in_mcp_server PASSED [ 75%]
tests/unit/refactor/test_performance_optimization_analysis.py::TestPerformanceMetrics::test_performance_metrics_creation PASSED [ 75%]
tests/unit/refactor/test_performance_optimization_analysis.py::TestPerformanceMetrics::test_performance_metrics_compression_ratio_calculation PASSED [ 76%]
tests/unit/refactor/test_performance_optimization_analysis.py::TestPerformanceMetrics::test_performance_metrics_to_dict PASSED [ 76%]
tests/unit/refactor/test_performance_optimization_analysis.py::TestPerformanceAnalyzer::test_analyzer_creation PASSED [ 76%]
tests/unit/refactor/test_performance_optimization_analysis.py::TestPerformanceAnalyzer::test_analyze_timing_performance_issues PASSED [ 76%]
tests/unit/refactor/test_performance_optimization_analysis.py::TestPerformanceAnalyzer::test_analyze_memory_performance_issues PASSED [ 76%]
tests/unit/refactor/test_performance_optimization_analysis.py::TestPerformanceMonitor::test_monitor_creation PASSED [ 77%]
tests/unit/refactor/test_performance_optimization_analysis.py::TestPerformanceMonitor::test_record_timing PASSED [ 77%]
tests/unit/refactor/test_performance_optimization_analysis.py::TestPerformanceMonitor::test_record_content_metrics PASSED [ 77%]
tests/unit/refactor/test_performance_optimization_analysis.py::TestPerformanceMonitor::test_record_optimization_usage PASSED [ 77%]
tests/unit/refactor/test_performance_optimization_analysis.py::TestPerformanceContext::test_performance_context_basic PASSED [ 77%]
tests/unit/refactor/test_problem_fixes.py::TestProblemFixes::test_specific_playwright_exception_handling 
-------------------------------- live log call ---------------------------------
2025-07-01 13:13:16 [ WARNING] Playwright strategy failed for https://example.com: Navigation timeout (logger.py:47)
PASSED                                                                   [ 78%]
tests/unit/refactor/test_problem_fixes.py::TestProblemFixes::test_import_error_handling 
-------------------------------- live log call ---------------------------------
2025-07-01 13:13:16 [   ERROR] Playwright not available: Playwright not installed (logger.py:51)
PASSED                                                                   [ 78%]
tests/unit/refactor/test_problem_fixes.py::TestProblemFixes::test_unexpected_exception_still_logged PASSED [ 78%]
tests/unit/refactor/test_pydantic_settings_implementation.py::TestPydanticSettingsImplementation::test_settings_class_exists PASSED [ 78%]
tests/unit/refactor/test_pydantic_settings_implementation.py::TestPydanticSettingsImplementation::test_settings_environment_variable_loading PASSED [ 78%]
tests/unit/refactor/test_pydantic_settings_implementation.py::TestPydanticSettingsImplementation::test_settings_default_values PASSED [ 79%]
tests/unit/refactor/test_pydantic_settings_implementation.py::TestPydanticSettingsImplementation::test_settings_type_validation PASSED [ 79%]
tests/unit/refactor/test_pydantic_settings_implementation.py::TestPydanticSettingsImplementation::test_settings_positive_number_validation PASSED [ 79%]
tests/unit/refactor/test_pydantic_settings_implementation.py::TestPydanticSettingsImplementation::test_settings_singleton_pattern PASSED [ 79%]
tests/unit/refactor/test_pydantic_settings_implementation.py::TestPydanticSettingsImplementation::test_settings_backward_compatibility PASSED [ 79%]
tests/unit/refactor/test_pydantic_settings_implementation.py::TestPydanticSettingsImplementation::test_settings_environment_prefix PASSED [ 80%]
tests/unit/refactor/test_pydantic_settings_implementation.py::TestPydanticSettingsImplementation::test_settings_model_dump PASSED [ 80%]
tests/unit/refactor/test_pydantic_settings_implementation.py::TestPydanticSettingsImplementation::test_settings_json_schema PASSED [ 80%]
tests/unit/refactor/test_pydantic_settings_implementation.py::TestConfigMigrationCompatibility::test_old_config_imports_still_work PASSED [ 80%]
tests/unit/refactor/test_pydantic_settings_implementation.py::TestConfigMigrationCompatibility::test_settings_values_match_config_values PASSED [ 80%]
tests/unit/refactor/test_pydantic_settings_implementation.py::TestConfigMigrationCompatibility::test_environment_variable_parsing_consistency PASSED [ 81%]
tests/unit/refactor/test_pydantic_settings_implementation.py::TestPydanticSettingsAdvancedFeatures::test_settings_field_descriptions PASSED [ 81%]
tests/unit/refactor/test_pydantic_settings_implementation.py::TestPydanticSettingsAdvancedFeatures::test_settings_validation_error_messages PASSED [ 81%]
tests/unit/refactor/test_pydantic_settings_implementation.py::TestPydanticSettingsAdvancedFeatures::test_settings_reload_functionality PASSED [ 81%]
tests/unit/refactor/test_retry_strategy_implementation.py::TestRetryConfig::test_retry_config_creation PASSED [ 81%]
tests/unit/refactor/test_retry_strategy_implementation.py::TestRetryConfig::test_retry_config_validation PASSED [ 82%]
tests/unit/refactor/test_retry_strategy_implementation.py::TestCircuitBreaker::test_circuit_breaker_creation PASSED [ 82%]
tests/unit/refactor/test_retry_strategy_implementation.py::TestCircuitBreaker::test_circuit_breaker_closed_state PASSED [ 82%]
tests/unit/refactor/test_retry_strategy_implementation.py::TestCircuitBreaker::test_circuit_breaker_open_state 
-------------------------------- live log call ---------------------------------
2025-07-01 13:13:16 [ WARNING] Circuit breaker moved to OPEN state (logger.py:47)
PASSED                                                                   [ 82%]
tests/unit/refactor/test_retry_strategy_implementation.py::TestRetryManager::test_retry_manager_creation PASSED [ 82%]
tests/unit/refactor/test_retry_strategy_implementation.py::TestRetryManager::test_delay_calculation_exponential PASSED [ 83%]
tests/unit/refactor/test_retry_strategy_implementation.py::TestRetryManager::test_delay_calculation_fixed PASSED [ 83%]
tests/unit/refactor/test_retry_strategy_implementation.py::TestRetryManager::test_should_retry_logic PASSED [ 83%]
tests/unit/refactor/test_retry_strategy_implementation.py::TestRetryManager::test_execute_with_retry_success PASSED [ 83%]
tests/unit/refactor/test_retry_strategy_implementation.py::TestRetryManager::test_execute_with_retry_failure_then_success 
-------------------------------- live log call ---------------------------------
2025-07-01 13:13:16 [ WARNING] Attempt 1 failed: [NETWORK_ERROR] Network error: Network failed. Retrying in 0.01s (logger.py:47)
PASSED                                                                   [ 83%]
tests/unit/refactor/test_retry_strategy_implementation.py::TestRetryDecorator::test_retry_decorator_success PASSED [ 84%]
tests/unit/refactor/test_retry_strategy_implementation.py::TestRetryDecorator::test_retry_decorator_failure_then_success 
-------------------------------- live log call ---------------------------------
2025-07-01 13:13:16 [ WARNING] Attempt 1 failed: [NETWORK_ERROR] Network error: Network failed. Retrying in 0.01s (logger.py:47)
PASSED                                                                   [ 84%]
tests/unit/refactor/test_scraping_config_srp_refactoring.py::TestURLConfig::test_url_config_creation_with_valid_url PASSED [ 84%]
tests/unit/refactor/test_scraping_config_srp_refactoring.py::TestURLConfig::test_url_config_creation_with_invalid_url PASSED [ 84%]
tests/unit/refactor/test_scraping_config_srp_refactoring.py::TestURLConfig::test_url_config_creation_with_empty_url PASSED [ 84%]
tests/unit/refactor/test_scraping_config_srp_refactoring.py::TestURLConfig::test_url_config_normalization PASSED [ 85%]
tests/unit/refactor/test_scraping_config_srp_refactoring.py::TestURLConfig::test_url_config_immutability PASSED [ 85%]
tests/unit/refactor/test_scraping_config_srp_refactoring.py::TestTimeoutConfig::test_timeout_config_creation_with_defaults PASSED [ 85%]
tests/unit/refactor/test_scraping_config_srp_refactoring.py::TestTimeoutConfig::test_timeout_config_creation_with_custom_values PASSED [ 85%]
tests/unit/refactor/test_scraping_config_srp_refactoring.py::TestTimeoutConfig::test_timeout_config_validation PASSED [ 85%]
tests/unit/refactor/test_scraping_config_srp_refactoring.py::TestTimeoutConfig::test_timeout_config_immutability PASSED [ 86%]
tests/unit/refactor/test_scraping_config_srp_refactoring.py::TestOutputConfig::test_output_config_creation_with_defaults PASSED [ 86%]
tests/unit/refactor/test_scraping_config_srp_refactoring.py::TestOutputConfig::test_output_config_creation_with_custom_values PASSED [ 86%]
tests/unit/refactor/test_scraping_config_srp_refactoring.py::TestOutputConfig::test_output_config_max_length_validation PASSED [ 86%]
tests/unit/refactor/test_scraping_config_srp_refactoring.py::TestOutputConfig::test_output_config_immutability PASSED [ 86%]
tests/unit/refactor/test_scraping_config_srp_refactoring.py::TestBrowserConfig::test_browser_config_creation_with_defaults PASSED [ 87%]
tests/unit/refactor/test_scraping_config_srp_refactoring.py::TestBrowserConfig::test_browser_config_creation_with_custom_values PASSED [ 87%]
tests/unit/refactor/test_scraping_config_srp_refactoring.py::TestBrowserConfig::test_browser_config_immutability PASSED [ 87%]
tests/unit/refactor/test_scraping_config_srp_refactoring.py::TestProcessingConfig::test_processing_config_creation_with_defaults PASSED [ 87%]
tests/unit/refactor/test_scraping_config_srp_refactoring.py::TestProcessingConfig::test_processing_config_creation_with_custom_values PASSED [ 87%]
tests/unit/refactor/test_scraping_config_srp_refactoring.py::TestProcessingConfig::test_processing_config_immutability PASSED [ 88%]
tests/unit/refactor/test_scraping_config_srp_refactoring.py::TestRefactoredScrapingConfig::test_refactored_config_creation_with_defaults PASSED [ 88%]
tests/unit/refactor/test_scraping_config_srp_refactoring.py::TestRefactoredScrapingConfig::test_refactored_config_creation_with_custom_values PASSED [ 88%]
tests/unit/refactor/test_scraping_config_srp_refactoring.py::TestRefactoredScrapingConfig::test_refactored_config_backward_compatibility_to_dict PASSED [ 88%]
tests/unit/refactor/test_scraping_config_srp_refactoring.py::TestRefactoredScrapingConfig::test_refactored_config_backward_compatibility_from_dict PASSED [ 88%]
tests/unit/refactor/test_scraping_config_srp_refactoring.py::TestRefactoredScrapingConfig::test_refactored_config_immutability PASSED [ 89%]
tests/unit/refactor/test_scraping_config_srp_refactoring.py::TestScrapingConfigBackwardCompatibility::test_original_scraping_config_still_works PASSED [ 89%]
tests/unit/refactor/test_scraping_config_srp_refactoring.py::TestScrapingConfigBackwardCompatibility::test_refactored_config_can_replace_original PASSED [ 89%]
tests/unit/refactor/test_type_hints_standardization.py::TestTypeHintStandardization::test_no_union_pipe_syntax_with_none PASSED [ 89%]
tests/unit/refactor/test_type_hints_standardization.py::TestTypeHintStandardization::test_consistent_list_type_usage PASSED [ 89%]
tests/unit/refactor/test_type_hints_standardization.py::TestTypeHintStandardization::test_no_optional_lowercase_list PASSED [ 90%]
tests/unit/refactor/test_type_hints_standardization.py::TestBackwardCompatibility::test_function_signatures_unchanged 
-------------------------------- live log call ---------------------------------
2025-07-01 13:13:16 [   ERROR] Error in original processing for https://example.com: Original processing failed: 'NoneType' object is not iterable (logger.py:51)
PASSED                                                                   [ 90%]
tests/unit/refactor/test_web_scraping_service_refactor.py::TestScrapingRequest::test_scraping_request_creation_with_minimal_params PASSED [ 90%]
tests/unit/refactor/test_web_scraping_service_refactor.py::TestScrapingRequest::test_scraping_request_creation_with_all_params PASSED [ 90%]
tests/unit/refactor/test_web_scraping_service_refactor.py::TestScrapingRequest::test_scraping_request_validation PASSED [ 90%]
tests/unit/refactor/test_web_scraping_service_refactor.py::TestScrapingRequest::test_scraping_request_backward_compatibility PASSED [ 91%]
tests/unit/refactor/test_web_scraping_service_refactor.py::TestNavigationHandler::test_navigation_handler_creation PASSED [ 91%]
tests/unit/refactor/test_web_scraping_service_refactor.py::TestNavigationHandler::test_navigation_handler_navigate_success 
-------------------------------- live log call ---------------------------------
2025-07-01 13:13:16 [    INFO] Rate limiting example.com: Sleeping for 0.06s (logger.py:43)
PASSED                                                                   [ 91%]
tests/unit/refactor/test_web_scraping_service_refactor.py::TestNavigationHandler::test_navigation_handler_navigate_failure 
-------------------------------- live log call ---------------------------------
2025-07-01 13:13:16 [    INFO] Rate limiting example.com: Sleeping for 2.00s (logger.py:43)
PASSED                                                                   [ 91%]
tests/unit/refactor/test_web_scraping_service_refactor.py::TestContentStabilizationHandler::test_content_stabilization_handler_creation PASSED [ 91%]
tests/unit/refactor/test_web_scraping_service_refactor.py::TestContentStabilizationHandler::test_content_stabilization_success PASSED [ 92%]
tests/unit/refactor/test_web_scraping_service_refactor.py::TestContentStabilizationHandler::test_content_stabilization_timeout 
-------------------------------- live log call ---------------------------------
2025-07-01 13:13:18 [ WARNING] Content did not stabilize within timeout for https://example.com (logger.py:47)
PASSED                                                                   [ 92%]
tests/unit/refactor/test_web_scraping_service_refactor.py::TestInteractionHandler::test_interaction_handler_creation PASSED [ 92%]
tests/unit/refactor/test_web_scraping_service_refactor.py::TestInteractionHandler::test_interaction_handler_click_success PASSED [ 92%]
tests/unit/refactor/test_web_scraping_service_refactor.py::TestInteractionHandler::test_interaction_handler_no_selector PASSED [ 92%]
tests/unit/refactor/test_web_scraping_service_refactor.py::TestInteractionHandler::test_interaction_handler_click_failure 
-------------------------------- live log call ---------------------------------
2025-07-01 13:13:18 [ WARNING] Could not click selector '.btn' (logger.py:47)
PASSED                                                                   [ 93%]
tests/unit/refactor/test_web_scraping_service_refactor.py::TestContentExtractionHandler::test_content_extraction_handler_creation PASSED [ 93%]
tests/unit/refactor/test_web_scraping_service_refactor.py::TestContentExtractionHandler::test_content_extraction_success PASSED [ 93%]
tests/unit/refactor/test_web_scraping_service_refactor.py::TestContentExtractionHandler::test_content_extraction_cloudflare_block 
-------------------------------- live log call ---------------------------------
2025-07-01 13:13:21 [ WARNING] Cloudflare challenge detected for https://example.com (logger.py:47)
PASSED                                                                   [ 93%]
tests/unit/refactor/test_web_scraping_service_refactor.py::TestRefactoredWebScrapingService::test_refactored_service_creation PASSED [ 93%]
tests/unit/refactor/test_web_scraping_service_refactor.py::TestRefactoredWebScrapingService::test_refactored_service_scrape_success PASSED [ 94%]
tests/unit/refactor/test_web_scraping_service_refactor.py::TestRefactoredWebScrapingService::test_refactored_service_navigation_failure PASSED [ 94%]
tests/unit/refactor/test_web_scraping_service_refactor.py::TestBackwardCompatibility::test_original_service_interface_maintained 
-------------------------------- live log call ---------------------------------
2025-07-01 13:13:21 [ WARNING] Unexpected error for https://example.com: cannot unpack non-iterable Mock object (logger.py:47)
PASSED                                                                   [ 94%]
tests/unit/refactor/test_web_scraping_service_refactor.py::TestBackwardCompatibility::test_parameter_object_integration PASSED [ 94%]
tests/unit/shared/test_config.py::test_get_env_int_override PASSED       [ 94%]
tests/unit/shared/test_config.py::test_get_env_int_fallback PASSED       [ 95%]
tests/unit/shared/test_output_format.py::test_format_content_dispatch[OutputFormat.MARKDOWN-to_markdown] PASSED [ 95%]
tests/unit/shared/test_output_format.py::test_format_content_dispatch[OutputFormat.TEXT-to_text] PASSED [ 95%]
tests/unit/shared/test_output_format.py::test_format_content_dispatch[OutputFormat.HTML-to_html] PASSED [ 95%]
tests/unit/shared/test_output_format.py::test_truncate_content_boundaries[None] PASSED [ 95%]
tests/unit/shared/test_output_format.py::test_truncate_content_boundaries[5] PASSED [ 96%]
tests/unit/shared/test_output_format.py::test_truncate_content_boundaries[1000] PASSED [ 96%]
tests/unit/shared/test_output_format.py::test_truncate_html_exact_and_overflow PASSED [ 96%]
tests/unit/shared/test_utils.py::test_filter_none_values_typical PASSED  [ 96%]
tests/unit/shared/test_utils.py::test_filter_none_values_all_none PASSED [ 96%]
tests/unit/shared/test_utils.py::test_filter_none_values_no_none PASSED  [ 97%]
tests/unit/shared/test_utils.py::test_filter_none_values_empty PASSED    [ 97%]
tests/unit/shared/test_utils.py::test_filter_none_values_nested PASSED   [ 97%]
tests/unit/shared/test_utils.py::test_filter_none_values_does_not_mutate_input PASSED [ 97%]
tests/unit/test_html_processor.py::TestHtmlProcessor::test_unwanted_tags_removed PASSED [ 97%]
tests/unit/test_html_processor.py::TestHtmlProcessor::test_empty_html_returns_empty_string 
-------------------------------- live log call ---------------------------------
2025-07-01 13:13:21 [ WARNING] Could not find body tag for http://example.com (logger.py:47)
PASSED                                                                   [ 98%]
tests/unit/test_html_processor.py::TestHtmlProcessor::test_no_body_tag 
-------------------------------- live log call ---------------------------------
2025-07-01 13:13:21 [ WARNING] Could not find body tag for http://example.com (logger.py:47)
PASSED                                                                   [ 98%]
tests/unit/test_html_processor.py::TestHtmlProcessor::test_only_unwanted_tags_results_empty 
-------------------------------- live log call ---------------------------------
2025-07-01 13:13:21 [ WARNING] Could not find body tag for http://example.com (logger.py:47)
PASSED                                                                   [ 98%]
tests/unit/test_html_processor.py::TestHtmlProcessor::test_spacing_between_elements PASSED [ 98%]
tests/unit/test_html_processor.py::TestHtmlProcessor::test_malformed_html_handled PASSED [ 98%]
tests/unit/test_html_processor.py::TestHtmlProcessor::test_unicode_preserved PASSED [ 99%]
tests/unit/test_settings.py::TestSettings::test_default_settings_load_correctly PASSED [ 99%]
tests/unit/test_settings.py::TestSettings::test_timeout_from_environment_variable PASSED [ 99%]
tests/unit/test_settings.py::TestSettings::test_debug_logs_enabled_from_env PASSED [ 99%]
tests/unit/test_settings.py::TestSettings::test_invalid_boolean_env_var_raises_error PASSED [ 99%]
tests/unit/test_settings.py::TestSettings::test_settings_are_cached PASSED [100%]

=================================== FAILURES ===================================
_ TestFallbackBrowserFactory.test_factory_creates_browser_with_performance_metrics _
tests/unit/infrastructure/test_fallback_browser_automation.py:279: in test_factory_creates_browser_with_performance_metrics
    mock_scraper_instance.scrape_url.return_value = ScrapingResult(success=True)
                                                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: ScrapingResult.__init__() missing 3 required positional arguments: 'content', 'strategy_used', and 'attempts'
_ TestIntegrationWithExistingServices.test_integration_with_web_scraping_service _
tests/unit/infrastructure/test_fallback_browser_automation.py:321: in test_integration_with_web_scraping_service
    service = WebScrapingService(
E   TypeError: WebScrapingService.__init__() got an unexpected keyword argument 'browser_factory'
__________________ test_fallback_called_when_playwright_fails __________________
tests/unit/infrastructure/test_fallback_browser_automation.py:432: in test_fallback_called_when_playwright_fails
    mock_scraper_instance.scrape_url.return_value = ScrapingResult(
E   TypeError: ScrapingResult.__init__() missing 3 required positional arguments: 'content', 'strategy_used', and 'attempts'
__________ TestScrapingMetricsCollector.test_record_scraping_failure ___________
tests/unit/refactor/test_fallback_scraper_refactor.py:254: in test_record_scraping_failure
    collector.record_scraping_failure(
E   TypeError: ScrapingMetricsCollector.record_scraping_failure() got an unexpected keyword argument 'final_url'
______ TestFallbackScraperRefactor.test_single_responsibility_compliance _______
tests/unit/refactor/test_fallback_scraper_refactor.py:441: in test_single_responsibility_compliance
    mock_orchestrator.execute_scraping.return_value = ScrapingResult(
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/local/lib/python3.11/unittest/mock.py:653: in __getattr__
    raise AttributeError("Mock object has no attribute %r" % name)
E   AttributeError: Mock object has no attribute 'execute_scraping'
=========================== short test summary info ============================
FAILED tests/unit/infrastructure/test_fallback_browser_automation.py::TestFallbackBrowserFactory::test_factory_creates_browser_with_performance_metrics
FAILED tests/unit/infrastructure/test_fallback_browser_automation.py::TestIntegrationWithExistingServices::test_integration_with_web_scraping_service
FAILED tests/unit/infrastructure/test_fallback_browser_automation.py::test_fallback_called_when_playwright_fails
FAILED tests/unit/refactor/test_fallback_scraper_refactor.py::TestScrapingMetricsCollector::test_record_scraping_failure
FAILED tests/unit/refactor/test_fallback_scraper_refactor.py::TestFallbackScraperRefactor::test_single_responsibility_compliance
============ 5 failed, 495 passed, 4 skipped, 2 warnings in 13.30s =============

